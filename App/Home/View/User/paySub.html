<!DOCTYPE html><html><head>    <meta charset="utf-8">    <title>马上支付</title>    <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">    <meta name="apple-mobile-web-app-capable" content="yes">    <meta name="apple-mobile-web-app-status-bar-style" content="black">    <link rel="stylesheet" href="__PUBLIC__/css/mui.min.css"></head><body><header class="mui-bar mui-bar-nav">    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>    <h1 class="mui-title">马上支付</h1></header><div class="mui-content" style="background-color:#fff">    <div class="mui-content-padded">        <p style="margin: 5px;text-align: center;">            充值金额:<{$money}>        </p>        <button type="button" onclick="callpay()" class="mui-btn mui-btn-danger mui-btn-block" style="padding: 5px 0;">马上支付</button></div></body><script>    //调用微信JS api 支付    function jsApiCall() {        WeixinJSBridge.invoke(                'getBrandWCPayRequest',        <{$jsApiParamerers}>,                function(res){//                            WeixinJSBridge.log(res.err_msg);                    if(res.err_msg == "get_brand_wcpay_request:ok") {                        setTimeout(function(){                            window.location.href = "<{:U('user/index')}>"                        },500)                    }else {                        //用户取消支付                        alert(res.err_msg);                    }                }    );    }    function callpay() {        if (typeof WeixinJSBridge == "undefined"){            if( document.addEventListener ){                document.addEventListener('WeixinJSBridgeReady', jsApiCall, false);            }else if (document.attachEvent){                document.attachEvent('WeixinJSBridgeReady', jsApiCall);                document.attachEvent('onWeixinJSBridgeReady', jsApiCall);            }        }else{            jsApiCall();        }    }</script></html>